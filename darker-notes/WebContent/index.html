<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Darker Notes</title>
		<!-- <link rel="stylesheet" href="css/style.css"> -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Fira+Sans|Space+Mono" rel="stylesheet">

		<!-- CDNs -->
		<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/gh/quirkey/sammy/lib/min/sammy-latest.min.js"></script>
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">

		<!-- Rendering -->
		<script type="text/javascript" src="https://rawgit.com/showdownjs/showdown/develop/dist/showdown.min.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>

	    <!-- Highlightjs for syntax highlighting (code blocks) -->
	    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
		<script>
			//hljs.initHighlightingOnLoad();
		</script>

		<!-- Our CSS -->
		<link rel="stylesheet" href="./css/styles.css">
		<link rel="stylesheet" href="./css/sidebar.css">
		<link rel="stylesheet" href="./css/textbox.css" />
		<link rel="stylesheet" href="./css/preview.css" />
		<link rel="stylesheet" href="./css/printable.css" />
		<link rel="stylesheet" href="./css/helpTable.css" />

	</head>
	<body>
		<!-- Navbar -->
		<nav id="navbar" class="navbar navbar-expand-lg navbar-dark bg-dark">
			<div class="nav-item nav-link">
				<button type="button" id="sidebarCollapse" class="btn btn-dark navbar-btn collapsed d-none" data-toggle="collapse" data-target="#sidebar" aria-expanded="true">
	                <span></span>
	                <span></span>
	                <span></span>
	            </button>
			</div>
			<div class="nav-item nav-link" data-toggle="tooltip" data-placement="bottom" title="Click here for help">
				<button id="help-button" role="button" data-toggle="modal" data-target="#help-modal" class="btn btn-dark" data-toggle="tooltip" data-placement="bottom" title="Help">
					<i class="fas fa-question fa-2x"></i>
				</button>
			</div>
			<div class="nav-item nav-link" data-toggle="tooltip" data-placement="bottom" title="Preview document">
				<span id="preview-popover" class="d-inline-block" data-toggle="popover" data-placement="right" data-content="❌ write some text first!">
					<button id="preview-button" role="button" class="btn btn-dark disabled" disabled="true" data-toggle="collapse" data-target="#preview-shade" aria-expanded="false">
						<i class="far fa-eye fa-inverse fa-2x"></i>
					</button>
				</span>
			</div>
			<!-- Print button. Shows when preview is on, and hidden when off. Needs JS to open new tab/window -->
			<div class="nav-item nav-link d-none" id="print-button">
				<button role="button" class="btn btn-dark" data-toggle="tootlip" data-placement="bottom" title="print">
					<span style="font-size: 24px; font-weight: bolder;">Print</span>
				</button>
			</div>
			<div class="mx-auto">
				<h1 id="title">Darker Notes</h1>
			</div>
			<!-- Delete button -->
			<div class="nav-item nav-link d-none" data-toggle="modal" data-target="#delete-modal" id="delete-button" data-placement="bottom" title="Delete File">
				<button type="button" class="btn btn-dark">
					<i class="fas fa-trash-alt fa-2x"></i>
				</button>
			</div>
			<!-- Notification button -->
			<div id="notification-button-wrapper" class="nav-item nav-link d-none" data-toggle="tooltip" data-placement="bottom" title="Under construction 😉">
				<button id="notification-button" type="button" class="btn btn-dark d-none">
					<i class="fas fa-bell fa-2x"></i>
				</button>
			</div>
			<form class="form-inline">
				<!-- Share Button, at first hidden. -->
				<button class="mx-3 btn btn-outline-warning d-none" id="share-button" type="button" data-toggle="modal" data-target="#share-modal">share</button>
				<!-- Sign in Button, at first displayed -->
				<button class="mx-3 btn btn-outline-warning" id="signin-button" type="button" data-toggle="modal" data-target="#signin-modal">sign in</button>
				<!-- Sign out Button, at first hidden . Add d-none to class list to hide-->
				<button class="mx-auto btn btn-outline-warning d-none" id="signout-button" type="button" data-toggle="modal" data-target="#signout-modal">sign out</button>

			</form>
		</nav>


		<!-- Sidebar -->
		<div class="row d-flex d-md-block flex-nowrap wrapper" style="margin-left: 0;">
	        <div class="col-md-3 float-left col-1 pl-0 pr-0 collapse width rounded shadow active" id="sidebar" aria-expanded="false">
                <div class="list-group border-0 card text-center text-md-left">
                	<div class="list-group-item d-inline-block border-0" data-toggle="collapse" aria-expanded="true">
                		<h4 class="d-none d-md-inline" style="margin-top: -1px;">Files</h4>
                	</div>
                	<div class="list-group-item collapsed border-0">
                		<div class="d-flex justify-content-between">
	                		<button onclick="addFile()" class="mx-auto btn btn-dark"><i class="fas fa-file"></i>New File</button>
	                		<button onclick="copyFile()" class="mx-auto btn btn-dark"><i class="fas fa-copy"></i>Copy File</button>
               			</div>
               		</div>
	                <div id="sidebar-files" style="display: block; overflow-y: auto;">
						<!-- Content goes here -->
					</div>
	            </div>
	        </div>
        </div>



		<!-- Main Window -->
		<main id="content" class="content container-fluid mx-auto">

			<!-- Preview Window -->
			<div class="container-fluid">
				<!-- <button role="button" class="btn btn-danger" data-toggle="collapse" data-target="#preview-shade" aria-expanded="true">vertical collapsible</button> -->
				<div id="preview-shade" class="shadow rounded height collapse hide" aria-expanded="false">
					<div>
						<em>write some text so we can render it!</em>
					</div>
				</div>
			</div>

			<!-- Filename title -->
			<div id="text-title" class="my-3" contenteditable="true" style="margin-left: 30%; margin-right: 30%;">
					New File
			</div>
			<!-- editable HTML text area -->
			<div id="text-area" contentEditable="true">

			</div>
		</main>





		<!-- Help Modal -->
		<div class="modal fade dark" id="help-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 class="modal-title">Help for Darker Notes</h5>
						<!-- <button type="button" class="close" data-dismiss="modal"></button> -->
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div class="modal-body text-center">
				  		<h2>Markdown Syntax</h2>
				  		<p>Markdown is simple and easy to use! Check out these simple examples below.</p>
				  		<div class="table-wrapper-scroll-y">
				  			<table class="table table-dark table-hover">
					  			<thead class="bg-dark"><tr><th scope="col"><strong>input</strong></th><th scope="col"><strong>output</strong></th></tr>
					  			</thead>
					  			<tbody>
					  				<tr><th><code># h1</code></th><th><h1>h1</h1></th></tr>
				  					<tr><th><code>## h2</code></th><th><h2>h2</h2></th></tr>
				  					<tr><th><code>### h3</code></th><th><h3>h3</h3></th></tr>
					  				<tr><th><code>**bold**</code></th><th><strong>bold</strong></th></tr>
				  					<tr><th><code>*italics*</code></th><th><em>italics</em></th></tr>
				  					<tr><th><code>***bold and italics***</code></th><th><em><strong>bold and italics</strong></em></th></tr>
				  					<tr><th><code>`code`</code></th><th><em><code>code</code></em></th></tr>
				  					<tr><th><code>$$T(n) = 2T(n/2) + n \Rightarrow O(nlogn)$$</code></th><th><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mn>2</mn><mi>T</mi><mo>(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo>)</mo><mo>+</mo><mi>n</mi><mo>⇒</mo><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">T(n) = 2T(n/2) + n \Rightarrow O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></th></tr>
					  			</tbody>
					  		</table>
				  		</div>
				  		<h2>Resources</h2>

						<a href="https://github.com/showdownjs/showdown/wiki/Showdown's-Markdown-syntax" target="_blank">Markdown Syntax</a>
						<br />
						<a href="https://katex.org/docs/supported.html" target="_blank">KaTeX Syntax</a>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Share Modal -->
		<div class="modal fade dark" id="share-modal" tabindex="-1" role="dialog">
			<form>
				<div class="modal-dialog">
					<div class="modal-content dark shadow">
						<div class="modal-header dark">
							<h5 class="modal-title">share</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span class="text-light" aria-hidden="true">&times;</span>
							</button>
						</div>
					  	<div class="modal-body">
							<div class="input-group mb-3">
								<div class="input-group-prepend">
								    <span class="input-group-text" id="basic-addon1">send to: </span>
 								 </div>
								<input class="form-control" placeholder="example@example.com" type="email" id="shareEmail">
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
							<!-- TODO the below line will need to call a function/servlet -->
							<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="sendFile()">share</button>
						</div>
					</div>
				</div>
			</form>
		</div>

		<!-- Delete Modal -->
		<div class="modal fade dark" id="delete-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 class="modal-title">Delete File</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div class="modal-body text-center">
						<div><i>Are you sure you would like to delete this file? This change is irreversible.</i></div>
						<br/>
						<button class="btn btn-warning" data-dismiss="modal">No</button>
						<button class="btn btn-secondary" data-dismiss="modal">Yes</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Signout Modal -->
		<div class="modal fade dark" id="signout-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 class="modal-title">sign out</h5>
						<!-- <button type="button" class="close" data-dismiss="modal"></button> -->
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div class="modal-body text-center">
						<div><i>Are you sure you would like to sign out?</i></div>
						<br/>
						<button class="btn btn-warning" data-dismiss="modal">No, keep me signed in</button>
						<button class="btn btn-secondary" data-dismiss="modal" onclick="logout()">Yes, sign me out</button>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
					</div>
				</div>
			</div>
		</div>


		<!-- SignIn Modal -->
		<div id="signin-modal" class="modal fade dark" tabindex="-1" role="dialog" aria-labelledby="signinModalCenterTitle" aria-hidden="true">
			<form>
				<div class="modal-dialog modal-dialog-centered dark" role="document">
					<div class="modal-content dark shadow">
						<div class="modal-header dark">
							<h5 class="modal-title" id="signinModalCenterTitle">sign in</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span class="text-light" aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Email" type="email" id="emailIn">
							</div>
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Password" type="text" onfocus="(this.type='password')" id="passIn">
							</div>
							<div id="signin-error" class="error text-center text-danger bg-light"></div>
							<p class="text-muted"><em>Don't have an account? Click "sign up" below!</em></p>
						</div>
						<div class="modal-footer">
							<button type="button" class="mr-auto btn btn-dark" data-toggle="modal" data-target="#signup-modal" data-dismiss="modal">sign up</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
							<button type="button" class="btn btn-warning" onclick="validateLogin()">submit</button>
						</div>
					</div>
				</div>
			</form>
		</div>

		<!-- SignUp content -->
		<div id="signup-modal" class="modal fade dark" tabindex="-1" role="dialog" aria-labelledby="signinModalCenterTitle" aria-hidden="true">
			<form>
				<div class="modal-dialog modal-dialog-centered dark" role="document">
					<div class="modal-content dark shadow">
						<div class="modal-header dark">
							<h5 class="modal-title" id="signupModalCenterTitle">sign up</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span class="text-light" aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Email" type="email" id="emailIn-addUser">
							</div>
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Password" type="text" onfocus="(this.type='password')" id="passIn-addUser">
							</div>
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Username" type="text" id="nameIn-addUser">
							</div>
							<div id="signup-error" class="error text-center text-danger bg-light"></div>
							<p class="text-muted"><em>Already have an account? Click "sign in" below!</em></p>
						</div>
						<div class="modal-footer">
							<button type="button" class="mr-auto btn btn-dark" data-toggle="modal" data-target="#signin-modal" data-dismiss="modal">sign in</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
							<button type="button" class="btn btn-warning" onclick="addUser()">submit</button>
						</div>
					</div>
				</div>
			</form>
		</div>

		<!-- Our scripts -->
		<script src="./js/app.js"></script>
		<script src="./js/sidebar.js"></script>
		<script src="./js/render.js"></script>
		<script src="./js/login.js"></script>
		<script src="./js/viewChange.js"></script>
		<script src="./js/preview.js"></script>
		<script src="./js/socket.js"></script>
		<script src="./js/logout.js"></script>
		<script src="./js/fileManagement.js"></script>
	</body>
</html>
